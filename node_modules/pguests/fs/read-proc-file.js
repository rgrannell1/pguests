
"use strict"





const fs        = require('fs')
const constants = require('pguests/commons/constants')





const readProcFile = (fpath, callback) => {

	const isReadable = fs.F_OK & fs.R_OK

	fs.access(fpath, isReadable, err => {

		if (err) {
			return callback(err, null)
		}

		fs.readFile(fpath, constants.encodings.ascii, (err, content) => {

			callback(err, content)

			fs.watchFile(fpath, (current, last) => {
				fs.readFile(fpath, constants.encodings.ascii, callback)
			})

		})

	})

	process.on(constants.signals.sigint, ( ) => {
		fs.unwatchFile(fpath)
	})

}





module.exports = readProcFile
